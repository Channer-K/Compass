<form id="confirm-form" action="{% url 'go-next' %}" method="POST" role="form">
  {% csrf_token %}
  <input type="hidden" name="step" value="{{req_step.pk}}">
  {% if user == task.applicant %}
    <button class="btn btn-primary btn-sm" type="submit" name="opt" value="yes">确认</button>
  {% endif %}
  {% if user == req_step.assignee %}
    <a class="btn btn-warning btn-sm" id="terminate-btn">终止发布</a>
  {% endif %}
</form>


<div id="terminate-div" title="终止所有的发布" style="display: none; width: 400px;">
    <div class="row">
      <label class="col-sm-3 control-label">请输入理由：</label>
      <div class="col-sm-9">
        <input class="form-control" type="text" id="terminate-info-id">
      </div>
    </div>
</div>

<script>
$('#terminate-btn').click(function(env){
  env.preventDefault();
  $("#terminate-div").dialog({
    resizable: false,
    height:180,
    width:600,
    modal: true,
    buttons: {
      "确认": function() {
        var ter_info = $('#terminate-info-id').val()
        $('<input>').attr({type: 'hidden', name: 'info', value: ter_info}).appendTo('#confirm-form');
        $('<input>').attr({type: 'hidden', name: "opt", value: "no"}).appendTo('#confirm-form');

        $('#confirm-form').submit();
        $( this ).dialog("close");
      },
      "取消": function() {
        $( this ).dialog("close");
      }
    },
    open:function () {
      $(this).closest(".ui-dialog").find("button").each(function(){
        $(this).addClass("btn btn-primary");
        $(this).css("font-size", "12px");
      });
    }
  });
});
</script>

